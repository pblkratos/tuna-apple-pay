<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POC - Apple Pay via Tuna</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .info-box {
            background: #f5f5f5;
            border-left: 4px solid #000000;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 4px;
        }

        .info-box p {
            color: #555;
            font-size: 13px;
            line-height: 1.6;
        }

        .info-box code {
            background: #e0e0e0;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 12px;
        }

        #applePayButtonContainer {
            margin: 30px 0;
            min-height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Estilos para o web component apple-pay-button */
        apple-pay-button {
            display: inline-block !important;
            visibility: visible !important;
            min-width: 200px !important;
            min-height: 40px !important;
            width: auto !important;
            height: auto !important;
            -webkit-appearance: none;
        }

        /* Garantir que o container n√£o esconde o bot√£o */
        #applePayButtonContainer apple-pay-button {
            display: inline-block !important;
            visibility: visible !important;
            min-width: 200px !important;
            min-height: 40px !important;
        }

        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            display: none;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
            display: block;
        }

        .console-log {
            margin-top: 20px;
            padding: 15px;
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }

        .console-log .log-entry {
            margin-bottom: 8px;
            padding: 5px;
            border-left: 3px solid transparent;
        }

        .console-log .log-entry.success {
            border-left-color: #4caf50;
        }

        .console-log .log-entry.error {
            border-left-color: #f44336;
        }

        .console-log .log-entry.info {
            border-left-color: #2196f3;
        }

        .loading {
            text-align: center;
            color: #666;
            margin: 20px 0;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #000000;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        input, select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 14px;
        }

        button {
            margin-top: 15px;
            padding: 12px 24px;
            background: #000000;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
        }

        button:hover {
            background: #333;
        }

        label {
            display: block;
            margin-bottom: 15px;
        }

        label strong {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçé POC Apple Pay via Tuna</h1>
        <p class="subtitle">Prova de Conceito - Integra√ß√£o Tuna + Apple Pay</p>

        <div class="info-box">
            <p><strong>‚ö†Ô∏è Nota:</strong> Esta √© uma POC para teste visual. Configure a URL da API e o Restaurant ID abaixo.</p>
            <p style="margin-top: 10px;"><strong>‚ÑπÔ∏è Importante:</strong> Apple Pay est√° dispon√≠vel apenas em dispositivos Apple (Safari no macOS/iOS) e requer configura√ß√£o espec√≠fica.</p>
        </div>

        <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <label>
                <strong>API URL:</strong>
                <input type="text" id="apiUrl" value="http://multipedidos.beta">
            </label>
            <label>
                <strong>Restaurant ID:</strong>
                <input type="number" id="restaurantId" value="1">
            </label>
            <label>
                <strong>Ambiente Tuna:</strong>
                <select id="tunaEnvironment">
                    <option value="production">Produ√ß√£o</option>
                    <option value="sandbox">Sandbox</option>
                    <option value="auto">Autom√°tico (sem par√¢metro)</option>
                </select>
            </label>
            <label style="margin-top: 10px;">
                <input type="checkbox" id="useMockSession" style="width: auto; margin-right: 8px;">
                <strong>Usar Session Mock (tempor√°rio)</strong>
            </label>
            <button onclick="initTuna()">üöÄ Carregar Apple Pay</button>
        </div>

        <div id="applePayButtonContainer">
            <div class="loading">
                <p>Configure os dados acima e clique em "Carregar Apple Pay"</p>
            </div>
        </div>

        <div id="status" class="status"></div>

        <div class="console-log" id="consoleLog">
            <div class="log-entry info">Console de logs aparecer√° aqui...</div>
        </div>
    </div>

    <!-- Tuna SDK v2 - Vers√£o mais atualizada -->
    <script src="https://storage.googleapis.com/tuna-statics/tuna-v2.js"></script>
    <!-- CSS opcional da Tuna -->
    <link rel="stylesheet" href="https://js.tuna.uy/css/components.css">

    <script>
        // Fun√ß√£o auxiliar para logar no console e na UI
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            
            const consoleLog = document.getElementById('consoleLog');
            consoleLog.insertBefore(logEntry, consoleLog.firstChild);
            
            // Manter apenas os √∫ltimos 10 logs
            while (consoleLog.children.length > 10) {
                consoleLog.removeChild(consoleLog.lastChild);
            }

            // Log tamb√©m no console do navegador
            if (type === 'error') {
                console.error(message);
            } else if (type === 'success') {
                console.log('‚úÖ', message);
            } else {
                console.log('‚ÑπÔ∏è', message);
            }
        }

        // Fun√ß√£o para atualizar status
        function updateStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;
        }

        // Configura√ß√µes do Apple Pay
        const APPLE_PAY_CONFIG = {
            merchantId: 'BCR2DN6TR7QYLIKK',
            merchantName: 'Teste POC Tuna',
            countryCode: 'BR',
            currencyCode: 'BRL'
        };

        // Fun√ß√£o para obter sessionId da API
        async function getSessionId(apiUrl, restaurantId) {
            try {
                log(`Fazendo requisi√ß√£o para: ${apiUrl}/restaurant/tuna/session`, 'info');
                log(`Restaurant ID: ${restaurantId}`, 'info');
                
                const response = await fetch(`${apiUrl}/restaurant/tuna/session`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        restaurantId: parseInt(restaurantId)
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`Erro HTTP ${response.status}: ${errorText || response.statusText}`);
                }

                const data = await response.json();
                log('Resposta da API recebida: ' + JSON.stringify(data), 'success');
                
                if (data.sessionId) {
                    log(`‚úÖ SessionId obtido: ${data.sessionId}`, 'success');
                    return data.sessionId;
                } else {
                    throw new Error('SessionId n√£o encontrado na resposta da API');
                }
            } catch (error) {
                log(`‚ùå Erro ao obter sessionId: ${error.message}`, 'error');
                throw error;
            }
        }

        // Verificar se Apple Pay est√° dispon√≠vel
        function checkApplePayAvailability() {
            if (typeof ApplePaySession === 'undefined') {
                return {
                    available: false,
                    reason: 'ApplePaySession n√£o est√° dispon√≠vel. Apple Pay s√≥ funciona em dispositivos Apple (Safari no macOS/iOS).'
                };
            }

            if (!ApplePaySession.canMakePayments()) {
                return {
                    available: false,
                    reason: 'Apple Pay n√£o est√° configurado neste dispositivo ou n√£o h√° cart√µes cadastrados.'
                };
            }

            return {
                available: true,
                reason: 'Apple Pay est√° dispon√≠vel!'
            };
        }

        // SessionId mock tempor√°rio
        const MOCK_SESSION_ID = 'sXvHXB2y7DEtt4QBYfbmNLh7TBfBlB5SldrPmTFTrMVCdEGO3yeGl62DcHyRrFDnz89SPXB6HaOuY0xh92BcUmdZ31nsnUv6b0GVyBYENNZ4Y91T';

        // Aguardar o SDK da Tuna carregar
        async function initTuna() {
            const apiUrl = document.getElementById('apiUrl').value.trim();
            const restaurantId = document.getElementById('restaurantId').value.trim();
            const tunaEnvironment = document.getElementById('tunaEnvironment').value;
            const useMockSession = document.getElementById('useMockSession').checked;
            
            if (!useMockSession && (!apiUrl || !restaurantId)) {
                updateStatus('‚ùå Por favor, preencha a URL da API e o Restaurant ID', 'error');
                return;
            }

            // Limpar logs anteriores
            document.getElementById('consoleLog').innerHTML = '';
            updateStatus('', '');
            
            const container = document.getElementById('applePayButtonContainer');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><p>Obtendo sessionId...</p></div>';
            
            log('Iniciando processo de carregamento do Apple Pay...', 'info');
            
            try {
                // Verificar disponibilidade do Apple Pay
                log('Verificando disponibilidade do Apple Pay...', 'info');
                const applePayCheck = checkApplePayAvailability();
                
                if (!applePayCheck.available) {
                    log('‚ö†Ô∏è ' + applePayCheck.reason, 'error');
                    updateStatus('‚ö†Ô∏è ' + applePayCheck.reason, 'error');
                    container.innerHTML = `<p style="color: orange; text-align: center; padding: 20px;">${applePayCheck.reason}</p>`;
                    return;
                }
                
                log('‚úÖ ' + applePayCheck.reason, 'success');
                
                // Obter sessionId da API ou usar mock
                let SESSION_ID;
                if (useMockSession) {
                    log('‚ö†Ô∏è Usando SessionId MOCK (tempor√°rio)', 'info');
                    SESSION_ID = MOCK_SESSION_ID;
                    log(`SessionId mock: ${SESSION_ID}`, 'info');
                } else {
                    log('Buscando sessionId da API...', 'info');
                    SESSION_ID = await getSessionId(apiUrl, restaurantId);
                }
                
                // Verificar se Tuna SDK est√° dispon√≠vel
                log('Verificando se Tuna SDK est√° dispon√≠vel...', 'info');
                
                if (typeof Tuna === 'undefined') {
                    throw new Error('Tuna SDK n√£o foi carregado. Verifique se o script foi carregado corretamente.');
                }

                log('Tuna SDK carregado com sucesso!', 'success');
                log(`Inicializando Tuna com sessionId real: ${SESSION_ID}`, 'info');

                // Tentar diferentes formas de inicializa√ß√£o baseado no ambiente selecionado
                let tuna;
                
                if (tunaEnvironment === 'auto') {
                    // Tentar primeiro sem par√¢metro de ambiente (o sessionId pode indicar o ambiente)
                    try {
                        tuna = Tuna(SESSION_ID);
                        log('Tuna inicializado com: Tuna(sessionId) - ambiente autom√°tico', 'success');
                    } catch (e1) {
                        log('Tentativa autom√°tica falhou, tentando com production...', 'info');
                        try {
                            tuna = Tuna(SESSION_ID, 'production');
                            log('Tuna inicializado com: Tuna(sessionId, "production")', 'success');
                        } catch (e2) {
                            log('Tentativa com production falhou, tentando com sandbox...', 'info');
                            try {
                                tuna = Tuna(SESSION_ID, 'sandbox');
                                log('Tuna inicializado com: Tuna(sessionId, "sandbox")', 'success');
                            } catch (e3) {
                                log('Todas as formas de inicializa√ß√£o falharam', 'error');
                                throw e3;
                            }
                        }
                    }
                } else {
                    // Usar o ambiente especificado pelo usu√°rio
                    try {
                        tuna = Tuna(SESSION_ID, tunaEnvironment);
                        log(`Tuna inicializado com: Tuna(sessionId, "${tunaEnvironment}")`, 'success');
                    } catch (e1) {
                        log(`Tentativa com ${tunaEnvironment} falhou, tentando sem par√¢metro...`, 'info');
                        try {
                            tuna = Tuna(SESSION_ID);
                            log('Tuna inicializado com: Tuna(sessionId) - sem ambiente', 'success');
                        } catch (e2) {
                            log('Todas as formas de inicializa√ß√£o falharam', 'error');
                            throw e2;
                        }
                    }
                }
                
                // Debug: inspecionar objeto tuna
                log('Tipo do objeto tuna: ' + typeof tuna, 'info');
                log('M√©todos dispon√≠veis: ' + Object.keys(tuna).join(', '), 'info');
                log('useApplePay existe? ' + (typeof tuna.useApplePay === 'function' ? 'SIM' : 'N√ÉO'), 'info');
                
                // Listar todos os m√©todos dispon√≠veis
                const allMethods = Object.getOwnPropertyNames(tuna).filter(prop => typeof tuna[prop] === 'function');
                if (allMethods.length > 0) {
                    log('M√©todos encontrados: ' + allMethods.join(', '), 'info');
                }

                // Configurar Apple Pay
                log('Configurando Apple Pay (v2)...', 'info');
                
                // Verificar se pode usar Apple Pay primeiro (m√©todo novo na v2)
                if (typeof tuna.canUseApplePay === 'function') {
                    log('Verificando disponibilidade com canUseApplePay (v2)...', 'info');
                    try {
                        const canUse = await tuna.canUseApplePay(APPLE_PAY_CONFIG.merchantId);
                        log('canUseApplePay retornou: ' + canUse, canUse ? 'success' : 'error');
                        if (!canUse) {
                            log('‚ö†Ô∏è Apple Pay n√£o est√° dispon√≠vel neste dispositivo', 'error');
                            updateStatus('‚ö†Ô∏è Apple Pay n√£o est√° dispon√≠vel neste dispositivo', 'error');
                            container.innerHTML = '<p style="color: orange; text-align: center; padding: 20px;">Apple Pay n√£o est√° dispon√≠vel neste dispositivo</p>';
                            return;
                        }
                    } catch (checkError) {
                        log('Erro ao verificar canUseApplePay: ' + checkError.message, 'error');
                    }
                }
                
                // Configura√ß√£o do Apple Pay conforme c√≥digo fonte v2
                // useApplePay recebe: { buttom, applePayCallback, cart, merchantId, displayName, embeddedMode?, embedderOrigin? }
                const applePaySettings = {
                    buttom: {  // Nota: no c√≥digo fonte est√° "buttom" (n√£o "button")
                        selector: '#applePayButtonContainer'
                    },
                    cart: {
                        lineItems: [
                            {
                                label: 'Produto de Teste',
                                amount: 1.00
                            }
                        ],
                        total: {
                            label: 'Total',
                            amount: 1.00
                        }
                    },
                    merchantId: APPLE_PAY_CONFIG.merchantId,
                    displayName: APPLE_PAY_CONFIG.merchantName,
                    applePayCallback: function(applePayPayload) {
                        log('‚úÖ Pagamento processado com sucesso!', 'success');
                        log('Dados do Apple Pay: ' + JSON.stringify(applePayPayload, null, 2), 'success');
                        updateStatus('‚úÖ Pagamento processado! Verifique o console para detalhes.', 'success');
                        return Promise.resolve();
                    }
                    // embeddedMode e embedderOrigin s√£o opcionais
                };
                
                log('Configura√ß√£o do Apple Pay (v2): ' + JSON.stringify(applePaySettings, null, 2), 'info');

                // Renderizar bot√£o do Apple Pay
                if (typeof tuna.useApplePay === 'function') {
                    log('M√©todo useApplePay encontrado (v2)! Renderizando bot√£o...', 'success');
                    
                    try {
                        // useApplePay retorna uma Promise que resolve para true/false
                        tuna.useApplePay(applePaySettings)
                            .then(function(isApplePayReady) {
                                if (isApplePayReady) {
                                    log('‚úÖ Apple Pay est√° pronto!', 'success');
                                    
                                    // Verificar se o bot√£o foi renderizado
                                    setTimeout(() => {
                                        const containerElement = document.querySelector('#applePayButtonContainer');
                                        log('Verificando se bot√£o foi renderizado...', 'info');
                                        log('Container existe? ' + (containerElement ? 'SIM' : 'N√ÉO'), 'info');
                                        
                                        if (containerElement) {
                                            log('Conte√∫do do container: ' + containerElement.innerHTML.substring(0, 200), 'info');
                                            log('Elementos filhos: ' + containerElement.children.length, 'info');
                                            
                                            // Verificar se h√° elemento apple-pay-button (web component)
                                            const applePayButton = containerElement.querySelector('apple-pay-button');
                                            const allButtons = containerElement.querySelectorAll('button');
                                            log('Bot√µes <button> encontrados: ' + allButtons.length, 'info');
                                            log('Elementos <apple-pay-button> encontrados: ' + (applePayButton ? '1' : '0'), 'info');
                                            
                                            if (applePayButton) {
                                                log('‚úÖ Bot√£o Apple Pay encontrado!', 'success');
                                                log('HTML do bot√£o: ' + applePayButton.outerHTML, 'info');
                                                
                                                // Verificar estilos do bot√£o
                                                const buttonStyle = window.getComputedStyle(applePayButton);
                                                log('Bot√£o display: ' + buttonStyle.display, 'info');
                                                log('Bot√£o visibility: ' + buttonStyle.visibility, 'info');
                                                log('Bot√£o width: ' + buttonStyle.width, 'info');
                                                log('Bot√£o height: ' + buttonStyle.height, 'info');
                                                
                                                // Garantir que o bot√£o est√° vis√≠vel e tem dimens√µes
                                                applePayButton.style.display = 'inline-block';
                                                applePayButton.style.visibility = 'visible';
                                                applePayButton.style.minWidth = '200px';
                                                applePayButton.style.minHeight = '40px';
                                                applePayButton.style.width = 'auto';
                                                applePayButton.style.height = 'auto';
                                                
                                                // Tentar for√ßar reflow/repaint
                                                applePayButton.offsetHeight;
                                                
                                                log('‚úÖ Bot√£o Apple Pay est√° vis√≠vel!', 'success');
                                                log('Estilos aplicados ao bot√£o', 'info');
                                                
                                                // Verificar novamente ap√≥s um tempo (web components podem demorar para inicializar)
                                                setTimeout(() => {
                                                    const buttonStyle2 = window.getComputedStyle(applePayButton);
                                                    log('Verifica√ß√£o ap√≥s 1s - Width: ' + buttonStyle2.width + ', Height: ' + buttonStyle2.height, 'info');
                                                    
                                                    if (buttonStyle2.width === '0px' || buttonStyle2.height === '0px') {
                                                        log('‚ö†Ô∏è Bot√£o ainda sem dimens√µes. Tentando for√ßar inicializa√ß√£o...', 'error');
                                                        
                                                        // Tentar disparar eventos que podem ajudar na inicializa√ß√£o
                                                        try {
                                                            applePayButton.dispatchEvent(new Event('load'));
                                                            applePayButton.dispatchEvent(new Event('DOMContentLoaded'));
                                                        } catch (e) {
                                                            log('Erro ao disparar eventos: ' + e.message, 'info');
                                                        }
                                                        
                                                        // Verificar shadow DOM
                                                        if (applePayButton.shadowRoot) {
                                                            log('Shadow DOM encontrado!', 'info');
                                                            const shadowContent = applePayButton.shadowRoot.innerHTML;
                                                            log('Conte√∫do do shadow DOM: ' + shadowContent.substring(0, 200), 'info');
                                                        } else {
                                                            log('Shadow DOM n√£o encontrado (pode ser normal)', 'info');
                                                        }
                                                        
                                                        // Verificar novamente ap√≥s mais tempo
                                                        setTimeout(() => {
                                                            const buttonStyle3 = window.getComputedStyle(applePayButton);
                                                            log('Verifica√ß√£o ap√≥s 2s - Width: ' + buttonStyle3.width + ', Height: ' + buttonStyle3.height, 'info');
                                                            
                                                            if (buttonStyle3.width === '0px' || buttonStyle3.height === '0px') {
                                                                log('‚ö†Ô∏è Bot√£o ainda sem dimens√µes ap√≥s 2s. Pode ser necess√°rio verificar configura√ß√£o do Apple Pay.', 'error');
                                                                updateStatus('‚ö†Ô∏è Bot√£o renderizado mas sem dimens√µes. Verifique logs no console.', 'error');
                                                            }
                                                        }, 1000);
                                                    } else {
                                                        log('‚úÖ Bot√£o tem dimens√µes corretas!', 'success');
                                                    }
                                                }, 1000);
                                            } else {
                                                log('‚ö†Ô∏è Elemento apple-pay-button n√£o encontrado no container', 'error');
                                                log('HTML completo do container: ' + containerElement.innerHTML, 'info');
                                            }
                                            
                                            // Verificar estilos que podem estar escondendo
                                            const computedStyle = window.getComputedStyle(containerElement);
                                            log('Container display: ' + computedStyle.display, 'info');
                                            log('Container visibility: ' + computedStyle.visibility, 'info');
                                            log('Container height: ' + computedStyle.height, 'info');
                                            log('Container width: ' + computedStyle.width, 'info');
                                        }
                                    }, 500);
                                    
                                    updateStatus('‚úÖ Bot√£o Apple Pay carregado. Clique para testar!', 'success');
                                    
                                    // Remover apenas o loading, mas manter o container intacto
                                    const loadingDiv = container.querySelector('.loading');
                                    if (loadingDiv) {
                                        loadingDiv.style.display = 'none';
                                    }
                                    
                                    // Garantir que o container est√° vis√≠vel
                                    container.style.display = 'block';
                                    container.style.visibility = 'visible';
                                    container.style.minHeight = '50px';
                                } else {
                                    log('‚ö†Ô∏è Apple Pay n√£o est√° dispon√≠vel', 'error');
                                    updateStatus('‚ö†Ô∏è Apple Pay n√£o est√° dispon√≠vel neste dispositivo', 'error');
                                }
                            })
                            .catch(function(error) {
                                log('‚ùå Erro ao inicializar Apple Pay: ' + error.message, 'error');
                                updateStatus('‚ùå Erro: ' + error.message, 'error');
                                console.error('Erro completo:', error);
                            });
                    } catch (apiError) {
                        log('‚ùå Erro ao chamar useApplePay: ' + apiError.message, 'error');
                        updateStatus('‚ùå Erro: ' + apiError.message, 'error');
                        throw apiError;
                    }
                } else {
                    const errorMsg = 'M√©todo useApplePay n√£o encontrado no objeto tuna. Verifique o console para ver os m√©todos dispon√≠veis.';
                    log(errorMsg, 'error');
                    log('Objeto tuna completo: ' + JSON.stringify(tuna, null, 2), 'error');
                    updateStatus('‚ùå ' + errorMsg, 'error');
                    throw new Error(errorMsg);
                }

            } catch (error) {
                log(`‚ùå Erro geral: ${error.message}`, 'error');
                updateStatus(`‚ùå Erro: ${error.message}`, 'error');
                container.innerHTML = `<p style="color: red;">Erro: ${error.message}</p>`;
                console.error('Erro completo:', error);
            }
        }
    </script>
</body>
</html>

